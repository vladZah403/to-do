(this["webpackJsonpto-do"]=this["webpackJsonpto-do"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),i=a.n(o),c=a(1),s=a(2),l=a(3),u=a(5),d=a(4);a(13),a(14);var m=function(e){var t=e.isDone,a=e.isImportant,n=e.text,o=e.onItemClick,i=e.id,c=e.onImportantClick,s=e.onDeleteItemClick,l="list-group-item ";return l+=t?" done ":"",l+=a?" important ":"",r.a.createElement("li",{className:l},r.a.createElement("button",{type:"button",className:"float-right btn btn-outline-danger p-1 ml-2",onClick:function(){return s(i)}},r.a.createElement("i",{className:"far fa-trash"})),r.a.createElement("button",{type:"button",className:"float-right btn btn-outline-warning p-1",onClick:function(){return c(i)}},r.a.createElement("i",{className:"far fa-star"})),r.a.createElement("span",{onClick:function(){return o(i)},className:"d-block"},n))};var p=function(e){var t=e.data,a=e.onItemClick,n=e.onImportantClick,o=e.onDeleteItemClick;return r.a.createElement("ul",{className:"toDoList list-group list-group-flush "},t.map((function(e){return r.a.createElement(m,Object.assign({key:e.id,onItemClick:a,onImportantClick:n,onDeleteItemClick:o},e))})))};a(15);var f=function(e){var t=e.all,a=e.done,n=e.mark,o=e.onStatClick,i=e.filter,c={width:""};c.width=100*Number(a)/Number(t)+"%";var s="badge badge-success mr-1 ",l="".concat(s," badge-success").concat("done"===i?" badge-pill ":""),u="".concat(s," badge-danger").concat("mark"===i?" badge-pill ":""),d="".concat(s," badge-dark").concat("all"===i?" badge-pill ":"");return r.a.createElement("div",null,r.a.createElement("span",{className:l,role:"button",onClick:function(){return o("done")}},"DONE:",a),r.a.createElement("span",{className:u,role:"button",onClick:function(){return o("mark")}},"MARK:",n),r.a.createElement("span",{className:d,role:"button",onClick:function(){return o("all")}},"ALL:",t),r.a.createElement("div",{className:"progress mt-1 mb-1"},r.a.createElement("div",{className:"progress-bar progress-bar-striped bg-warning ",style:c,role:"progressbar","aria-valuenow":a,"aria-valuemin":"0","aria-valuemax":t})))},b=(a(16),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={input:""},e.onAddTask=function(){e.props.onAddItem(e.state.input),e.setState({input:""})},e.onInputChange=function(t){e.setState({input:t.target.value})},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control ",placeholder:"","aria-label":"",onChange:this.onInputChange,value:this.state.input}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button",onClick:this.onAddTask},"Add")))}}]),a}(n.Component));a(17);var k=function(e){return r.a.createElement("div",{className:"input-group mt-2 mb-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement("input",{type:"text",className:"form-control",onChange:e.onSearchInput,"aria-describedby":"btnGroupAddon"}))};var h=function(e){return r.a.createElement("div",{className:"d-flex justify-content-center w-100 m-1"},r.a.createElement("button",{type:"button",onClick:e.onDeleteClick,className:"btn btn-danger"},"Delete All"))},v=(a(18),function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={maxId:1,todos:[],visible:[],filter:"all",search:""},n.db=null,n.onItemClick=function(e){var t=Object(c.a)(n.state.todos);t.forEach((function(t){t.id===e&&(t.isDone=!t.isDone,n.dbUpdate(t))})),n.setState({todos:t})},n.onImportantClick=function(e){var t=Object(c.a)(n.state.todos);t.forEach((function(t){t.id===e&&(t.isImportant=!t.isImportant,n.dbUpdate(t))})),n.setState({todos:t})},n.onAddItem=function(e){console.log("add item");var t=Object(c.a)(n.state.todos),a=n.genereteItem(e);t.unshift(a),n.dbAdd(a),n.setState({todos:t})},n.onDeleteItemClick=function(e){var t=Object(c.a)(n.state.todos).filter((function(t){return t.id!==e}));n.setState({todos:t}),n.dbDelete(e)},n.onStatClick=function(e){n.setState({filter:e})},n.onSearchInput=function(e){n.setState({search:e.target.value})},n.onDeleteClick=function(){n.setState({maxId:1,todos:[],filter:"all",search:""}),n.dbDeleteAll()},n.dbFirstInit(),n.dbRead(),n}return Object(l.a)(a,[{key:"stateInit",value:function(e){var t=this;e.onsuccess=function(e){var a=e.target.result,n=a.reduce((function(e,t){var a=t.id;return e>a?e:a}),1);t.setState({todos:a,visible:a,maxId:n})}}},{key:"dbRead",value:function(){this.dbOperation("read")}},{key:"dbFirstInit",value:function(){window.indexedDB.open("tasksBank",1).onupgradeneeded=function(e){e.target.result.createObjectStore("tasks",{keyPath:"id"})}}},{key:"dbAdd",value:function(e){this.dbOperation("create",e)}},{key:"dbUpdate",value:function(e){this.dbOperation("update",e)}},{key:"dbDelete",value:function(e){this.dbOperation("delete",e)}},{key:"dbDeleteAll",value:function(){this.dbOperation("delete-all")}},{key:"dbOperation",value:function(e,t){var a=this,n=window.indexedDB.open("tasksBank",1),r="read"===e?"readonly":"readwrite";n.onsuccess=function(){var o=n.result.transaction("tasks",r).objectStore("tasks");switch(e){case"create":o.add(t);break;case"update":o.put(t);break;case"delete":o.delete(t);break;case"read":var i=o.getAll();a.stateInit(i);break;case"delete-all":o.clear();break;default:console.log("hh")}}}},{key:"genereteItem",value:function(e){0===e.length&&(e=" emply task");var t=this.state.maxId+1;return this.setState({maxId:t}),{id:t,text:e,isDone:!1,isImportant:!1}}},{key:"filter",value:function(){var e=Object(c.a)(this.state.todos);return"all"===this.state.filter?e:"done"===this.state.filter?e.filter((function(e){return e.isDone})):"mark"===this.state.filter?e.filter((function(e){return e.isImportant})):void 0}},{key:"genereteStatistic",value:function(){return{all:this.state.todos.length,done:this.state.todos.reduce((function(e,t){return e+(t.isDone?1:0)}),0),mark:this.state.todos.reduce((function(e,t){return e+(t.isImportant?1:0)}),0),filter:this.state.filter,onStatClick:this.onStatClick}}},{key:"search",value:function(e){if(""===this.state.search)return e;var t=new RegExp(this.state.search,"i");return e.filter((function(e){var a=e.text;return t.test(a)}))}},{key:"render",value:function(){var e=this.genereteStatistic(),t=this.filter(),a=this.search(t);return r.a.createElement("div",{className:"app"},r.a.createElement(f,e),r.a.createElement(k,{onSearchInput:this.onSearchInput}),r.a.createElement(b,{onAddItem:this.onAddItem}),r.a.createElement(p,{data:a,onItemClick:this.onItemClick,onImportantClick:this.onImportantClick,onDeleteItemClick:this.onDeleteItemClick}),r.a.createElement(h,{onDeleteClick:this.onDeleteClick}))}}]),a}(n.Component));i.a.render(r.a.createElement(v,null),document.querySelector("#root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.2557fc3d.chunk.js.map